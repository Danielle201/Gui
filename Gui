local player = game.Players.LocalPlayer
local userInputService = game:GetService("UserInputService")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MainGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = game:GetService("CoreGui")

-- Toggle Button in Corner Next to Chat
local toggleButton = Instance.new("TextButton")
toggleButton.Parent = screenGui
toggleButton.Size = UDim2.new(0, 150, 0, 50)
toggleButton.Position = UDim2.new(0, 10, 1, -50)  -- Corner near chat
toggleButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.SourceSansBold
toggleButton.TextSize = 24
toggleButton.Text = "Toggle UI"

-- Main Frame (50% of screen, darker gray background)
local mainFrame = Instance.new("Frame", screenGui)
mainFrame.Size = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.Position = UDim2.new(0.25, 0, 0.25, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(90, 90, 90)  -- Darker gray
mainFrame.BorderSizePixel = 0
mainFrame.Active = true  -- Required for dragging
mainFrame.Draggable = false -- Custom dragging

-- Header with "VortexFusionX"
local header = Instance.new("TextLabel", mainFrame)
header.Size = UDim2.new(1, 0, 0, 50)  -- Full width, height of 50 pixels
header.Position = UDim2.new(0, 0, 0, 0)
header.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
header.TextColor3 = Color3.fromRGB(255, 255, 255)
header.Font = Enum.Font.SourceSansBold
header.TextSize = 32
header.Text = "VortexFusionX"

-- Left Side: Scrollable Tab Section (takes small space)
local leftTabSection = Instance.new("ScrollingFrame", mainFrame)
leftTabSection.Size = UDim2.new(0.2, 0, 1, -50)  -- 20% width, full height minus header
leftTabSection.Position = UDim2.new(0, 0, 0, 50)  -- Starts below the header
leftTabSection.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
leftTabSection.BorderSizePixel = 0
leftTabSection.CanvasSize = UDim2.new(0, 0, 3, 0)  -- Make it scrollable
leftTabSection.ScrollBarThickness = 6

-- Add fewer tabs (5 tabs) to the scrollable section
for i = 1, 5 do
    local tabButton = Instance.new("TextButton", leftTabSection)
    tabButton.Size = UDim2.new(1, 0, 0, 50)
    tabButton.Position = UDim2.new(0, 0, 0, (i-1) * 55)
    tabButton.BackgroundColor3 = Color3.fromRGB(100, 100, 100)
    tabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    tabButton.Font = Enum.Font.SourceSans
    tabButton.TextSize = 20
    tabButton.Text = "Tab " .. i
end

-- Right Side: Scrollable Section for placing buttons (no sample button)
local rightButtonSection = Instance.new("ScrollingFrame", mainFrame)
rightButtonSection.Size = UDim2.new(0.75, 0, 1, -50)  -- 75% width, full height minus header
rightButtonSection.Position = UDim2.new(0.2, 0, 0, 50)  -- Right of tabs, below the header
rightButtonSection.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
rightButtonSection.BorderSizePixel = 0
rightButtonSection.CanvasSize = UDim2.new(0, 0, 3, 0)  -- Make it scrollable
rightButtonSection.ScrollBarThickness = 6

-- Toggle UI visibility function
local uiVisible = true
toggleButton.MouseButton1Click:Connect(function()
    uiVisible = not uiVisible
    mainFrame.Visible = uiVisible
end)

-- Dragging functionality for the entire GUI (mainFrame)
local dragging = false
local dragInput, mousePos, framePos

mainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        mousePos = input.Position
        framePos = mainFrame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

mainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

userInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - mousePos
        mainFrame.Position = UDim2.new(
            framePos.X.Scale,
            framePos.X.Offset + delta.X,
            framePos.Y.Scale,
            framePos.Y.Offset + delta.Y
        )
    end
end)
